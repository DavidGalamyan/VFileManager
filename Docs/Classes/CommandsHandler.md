*[Назад](./../code.md)*  
 
## Описание класса CommandsHandler.cs  
   
Класс обработчик команд приложения.  
  
Основной функционал класса - парсинг команд и их аргументов из списка слов полученных из ввода пользователя (см. описание класса **Input.cs**). 
А так же обработка и выполнение самих команд приложения.
  
Все команды приложения и их аргументы, помещены в двух соответствующих словарях.  
Ключами словарей служат тектовые представления команд, а значениями перечисления с идентификаторами команд.  
  
Пример:  
```css
    public enum Commands
    {
        Help,//Вывод справки
        Dir,//Вывод списка каталогов
        ...
        DirCopy,//Копирование каталога
        Move,//Перемещение файла
        ...
        Exit,//Выход из программы
        WrongCommand,//Неправильная команда
    }
```
  
```css
    private readonly Dictionary<string, Commands> commands = new Dictionary<string, Commands>
    {
        { "help", Commands.Help },
        { "dir", Commands.Dir },
        ...
        { "dcopy", Commands.DirCopy },
        { "move", Commands.Move },
        ....
        { "exit", Commands.Exit },
        { "version", Commands.Version },
    };
```

Парсинг команд и аргументов происходит через проверку слов из ввода пользователя, на то содержит ли словарь такой ключ **.ContainsKey()**, 
и если результат положительный, то извлечение идентификатора команды из словаря и в дальнейшем вызов метода соответствующего нужной команде 
(через конструкцию switch() в классе **Program.cs**)  

В дальнейшем в методе нужной команды, подобным же образом происходит парсинг аргументов, если они у команды есть 
(например -p и -l у команды вывода дерева каталогов) и отдельно поиск путей к файлам/каталогам (методами из класса **FilesHandler.cs** ). 
И далее обработка команд - вызов нужных методов копирования, удаления и т.д. из **FilesHandler.cs** и вывода на экран из **Output.cs**  
  
Все команды построены таким образом, что первое слово в воде пользователя всегда должно быть командой, 
а последующие либо путями к файлам/каталогам, либо аргументами со следующими за ними числовыми значениями.  
В соответствии с этим на значение команды всегда проверяется только первое слово из ввода, а на пути и аргументы последующие.  
Если в списке ввода найден аргумент, то следующее за ним слово парсится в число, в случае неудачи, аргумент не учитывается.  
Так же дополнительно проводятся проверки на совпадение имен файлов с аргументами (например каталог с именем "-p") и наличия подобных файлов, 
чтобы избежать путаницы.  
Пути к файлам/каталогам можно задавать либо абсолютными, либо отностельно каталога, дерево которого в данный момент просматривается. 

